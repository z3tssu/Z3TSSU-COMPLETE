### **Notes: Pivoting Section**

---

### **Definition of Pivoting:**

- Pivoting is leveraging access to one compromised system to gain access to other systems on a different subnet or network inaccessible directly to the attacker.

---

### **Lab Setup for Pivoting:**

1. **Shutting Down Virtual Machines**:
    - Shutdown both **Windows 10 machines** to reconfigure the network settings.
2. **Network Configuration**:
    - **Subnet A**: 192.168.57.0/24 (current network, includes the domain controller and a Windows 10 machine).
    - **Subnet B**: 10.10.10.0/24 (a second network, accessible only through a dual-homed machine with NICs on both subnets).
3. **Setup Process**:
    - Modify virtual network settings to add a second NIC (Network Interface Card):
        - Subnet A: 192.168.57.0/24.
        - Subnet B: 10.10.10.0/24.
    - Ensure:
        - **Machine 1 (Dual-homed)**: Connected to both subnets.
        - **Machine 2**: Only accessible on 10.10.10.0/24.
4. **Verification Steps**:
    - Boot the virtual machines and verify IP configurations:
        - Dual-homed machine should display:
            - 192.168.57.x for Subnet A.
            - 10.10.10.x for Subnet B.
        - Machine 2 should display only an IP from 10.10.10.x.
    - Verify connectivity:
        - Ping between machines on **Subnet B**.
        - From the attacker machine (Kali Linux), ensure reachability to the dual-homed machine.

---

### **Execution Steps:**

1. **Tools & Software**:
    - Use **Metasploit Framework** for exploitation and pivoting:
        - Start Metasploit: `msfconsole`.
2. **IP Configuration Validation**:
    - Check IPs:
        
        ```Shell
        ipconfig
        ```
        
    - Dual-homed machine:
        - Subnet A: `192.168.57.140`.
        - Subnet B: `10.10.10.128`.
    - Second machine:
        - Subnet B: `10.10.10.129`.
3. **Ping Validation**:
    - Verify communication between:
        - Machine 1 (dual-homed) and Machine 2 on Subnet B.
        - Attacker (Kali Linux) to Machine 1 on Subnet A.
4. **Next Steps**:
    - Exploit the dual-homed machine from Subnet A using Metasploit.
    - After exploitation:
        - Set up forwarding to pivot to Subnet B.
        - Scan and potentially exploit systems on Subnet B.

---