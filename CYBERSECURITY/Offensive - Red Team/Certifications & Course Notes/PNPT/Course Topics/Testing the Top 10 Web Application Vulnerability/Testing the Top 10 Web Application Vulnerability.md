---
Status: In progress
---
# OWASP Top 10 and OWASP Testing Checklists

[https://owasp.org/www-project-web-security-testing-guide/](https://owasp.org/www-project-web-security-testing-guide/)

## OWASP Checklist

[https://github.com/tanprathan/OWASP-Testing-Checklist/tree/master](https://github.com/tanprathan/OWASP-Testing-Checklist/tree/master)

![[/OWASP-Testing-Checklist-master.zip|OWASP-Testing-Checklist-master.zip]]

  

# Installing OWASP Juiceshop

---

https://github.com/juice-shop/juice-shop

---

### Notes: Installing OWASP Juice Shop on Kali Linux

### Prerequisites

- **Ensure Kali Linux is installed.**
- **Install Docker:**
    1. Open Terminal and Firefox.
    2. Search "Install Docker Kali Linux" on Google.
    3. Use the guide titled "Installing Docker on Kali Linux updated for 2019.4".
    4. Follow these steps:
        - Update apt packages:
            
            ```Shell
            sudo apt update
            ```
            
        - Install Docker:  
            (~385 MB, press `Y` to confirm installation).
            
            ```Shell
            sudo apt install docker-ce
            ```
            

### Setting Up OWASP Juice Shop

1. **Understand OWASP Juice Shop:**
    - A deliberately vulnerable web application for learning web security.
    - Simulates an online shop for practicing OWASP Top 10 attacks.
2. **Deployment Options:**
    - **Docker Deployment (Preferred):**
        - Pull Juice Shop Docker image:
            
            ```Shell
            docker pull bkimminich/juice-shop
            ```
            
        - Run Juice Shop:  
            Juice Shop will now be accessible at `http://localhost:3000`.
            
            ```Shell
            docker run -d -p 3000:3000 bkimminich/juice-shop
            ```
            
    - **Heroku Deployment:**
        - Alternative deployment for global access (less secure for some attack types).

### Exploring Juice Shop

- Visit `http://localhost:3000` to confirm it is running.
- Juice Shop includes:
    - A web app to simulate vulnerabilities.
    - A scoreboard tracking completed challenges (difficulty: 1-star to 7-star).

### Resources

- **Juice Shop Documentation:**
    - GitHub repository.
    - [GitBook (comprehensive challenges and solutions guide).](https://pwning.owasp-juice.shop/companion-guide/latest/)
    - Categories and solutions for challenges:
        - Example: Cross-Site Scripting (XSS) includes challenge explanations and walkthroughs.
    - Use `Ctrl+F` to locate specific solutions.

### Next Steps

- Install FoxyProxy for browser integration with Burp Suite.
- Learn Burp Suite to scan Juice Shop and identify vulnerabilities.

---

# Exploring BurpSuite

Here's a concise summary and notes on the provided transcript. The notes focus on Burp Suite usage and related concepts. I'll save them as a `.txt` file.

---

### Notes: Introduction to Burp Suite and Penetration Testing Workflow

### Overview of Burp Suite

- **Purpose**: Essential tool for web application penetration testing, used to intercept, modify, and analyze web traffic.
- **Versions**:
    - **Community Edition**: Limited features, slower Intruder functionality, no active scanning.
    - **Professional Edition**: Includes advanced features like active scanning, crawling, and enhanced tools.
- **Key Features**:
    1. **Proxy Intercept**: Analyze and modify HTTP requests in real-time.
    2. **Repeater**: Resend and modify intercepted requests.
    3. **Intruder**: Automate payload injection to test for vulnerabilities (Community Edition is slower).
    4. **Decoder**: Encode/decode data (e.g., Base64, URL encoding).
    5. **Extensions**: Access to additional tools via the App Store, e.g., Turbo Intruder.

### Penetration Testing Workflow

1. **Testing Stages**:
    - **Unauthenticated**: Interact with the application without credentials.
    - **Authenticated as a User**: Test as a regular user with limited privileges.
    - **Authenticated as an Admin**: Test with admin-level access for security gaps.
2. **Typical Goals**:
    - Identify vulnerabilities in access controls (e.g., unauthorized access to admin panels).
    - Explore parameter tampering, cookie modifications, or other attack vectors.

### Setting Up Burp Suite for Testing

- **Scope Management**:
    - Right-click a target URL and add it to the scope.
    - Filter to show only scoped items to reduce noise.
- **Proxy Configuration**:
    - Intercept requests only for targets in scope.
    - Avoid capturing background browser traffic unrelated to testing.
- **Request Modification**:
    - Send intercepted requests to Repeater for iterative testing.
    - Modify HTTP methods (e.g., `GET` to `POST`) or parameters to explore vulnerabilities.

### Tips on Burp Suite Usage

- **Proxy**:
    - Intercept HTTP requests for detailed inspection.
    - Modify requests (e.g., change cookies, headers) and forward them for testing.
- **Repeater**:
    - Use for parameter tampering, testing payloads, or observing application responses.
- **Intruder**:
    - Automate payload injection for brute-forcing or fuzzing.
    - For faster execution, consider Turbo Intruder (free in the App Store).
- **Decoder**:
    - Encode/decode data for tests (e.g., Base64 encoding of parameters).

### Community Edition Limitations

- No active scanning or engagement tools (available in Professional Edition).
- Crawling ("spidering") and vulnerability scanning are disabled.
- Manual testing is emphasized for identifying vulnerabilities.

### Recommendations

- **Professional Edition**: Invest if planning to pursue bug bounty programs or in-depth penetration testing.
- **Focus**: Manual testing is critical; tools like active scanning provide only partial coverage (~10% of vulnerabilities).

---

# The Scoreboard

### Notes on Video Transcript: SQL Injection and Scoreboard Overview

---

### **Scoreboard Overview**

1. **Navigation**:
    - Access the scoreboard via: `localhost#/score-dashboard`.
    - Unlock the hidden scoreboard achievement upon navigating correctly.
2. **Features of the Scoreboard**:
    - Lists all types of vulnerabilities and challenges.
    - Organized in alphabetical order.
    - Features a tutorial hat icon for walkthroughs and interactive tutorials.
    - Provides hints for challenges via an orange button.
3. **Hints and Guidance**:
    - Offers interactive challenges with accessible hints.
    - Useful for troubleshooting or progressing through specific challenges.

---

### **Injection Section Focus**

1. **Filtering**:
    - Filter challenges specifically for _injection vulnerabilities_.
    - Challenges sorted by difficulty (e.g., two-star rating is easiest).
2. **SQL Injection Basics**:
    - Start with simple challenges to build foundational knowledge.
    - Example Challenge: Log in with an administrator’s account.
        - Includes walkthroughs and hints for guidance.
3. **Learning Outcomes**:
    - Understand what injection attacks are.
    - Apply solutions to challenges with increasing complexity.
    - Explore defenses for vulnerabilities after understanding attacks.

---

### **General Course Context**

- **Objective**:
    - Provide familiarity with web app vulnerabilities for interviews.
    - Build a practical foundation for further learning.
- **Format**:
    - Overview of each topic.
    - Walkthrough of challenges.
    - Discussion on defense mechanisms.
- **Scope**:
    - Not a comprehensive web app course.
    - Focused on practical and interview-ready skills.

---

### **Next Steps**

- Begin with the "Log in with Administrator" SQL injection challenge.
- Expand understanding by applying defenses and exploring solutions.

---

Would you like this saved as a Markdown `.txt` file?

# SQLi Attack and Defend

## Overview

# Notes: SQL Injection Attacks

## Introduction to SQL Injection

- **Definition**: SQL Injection involves injecting malicious SQL statements into a database to manipulate or exploit it.
- **Impact**:
    - Reading sensitive data.
    - Extracting or modifying database information.
    - Potentially gaining shell access to the server.
- **Cause**: Poorly written code.

## Common SQL Verbs

- SQL statements begin with a **verb**:
    1. **SELECT**: Retrieves data from a table.
    2. **INSERT**: Adds data to a table.
    3. **DELETE**: Removes data from a table.
    4. **UPDATE**: Modifies data in a table.
    5. **DROP**: Deletes a table. **(Caution: Very destructive)**
    6. **UNION**: Combines results from multiple queries.

## Key SQL Terms and Filters

- **WHERE**: Filters records based on conditions.
- **Logical operators**:
    - **AND**: Combines multiple conditions, all must be true.
    - **OR**: Combines multiple conditions, any can be true.
    - **NOT**: Negates a condition.
- **ORDER BY**: Sorts records in ascending or descending order.

## Example Table: `users`

|   |   |   |   |   |
|---|---|---|---|---|
|user_id|username|full_name|email|country|
|1|Frank|Frank Castle|Punisher@marvel.com|US|
|2|Natasha|Natasha Romanoff|BlackWidow@marvel.com|Russia|

### Example SQL Queries:

1. **Retrieve all records**:
    
    ```SQL
    SELECT * FROM users;
    ```
    

Result: Returns all rows and columns from the `users` table.

1. **Retrieve specific columns**:
    
    ```SQL
    sql
    Copy code
    SELECT user_id, username FROM users;
    
    ```
    
    Result: Only the `user_id` and `username` columns.
    
2. **Filter records**:
    - Users from Russia:
        
        ```SQL
        sql
        Copy code
        SELECT * FROM users WHERE country = 'Russia';
        
        ```
        
        Result: Only Natasha's record.
        
    - Users from the US named Frank:
        
        ```SQL
        sql
        Copy code
        SELECT * FROM users WHERE country = 'US' AND username = 'Frank';
        
        ```
        
        Result: Only Frank's record.
        

## Special Characters in SQL

- **String delimiters**: `'`, `"`.
- **Comment delimiters**:
    - `-` (single-line comments).
    - `/* ... */` (multi-line comments).
    - `#` (alternative single-line comments).
- **Wildcards**:
    - : Selects all.
    - `%`: Matches zero or more characters.
- **Statement terminator**: `;` (ends SQL statements).
- **Programming logic symbols**:
    - `=`, `+`, `>`, `<`, `()`, etc.

## Next Steps

- Learn to test for SQL injection vulnerabilities.
- Explore defenses against SQL injection attacks, such as:
    - Using parameterized queries.
    - Avoiding dynamic SQL generation.
    - Regular code reviews.

## SQL Injection Walkthrough

## Perform SQL Injection on Login Page (Juiceshop)

1. **Identify Input Fields**:
    - Navigate to the account login page.
    - Input example: `test` for both email and password fields.
        
        ![[/image 55.png|image 55.png]]
        
2. **Intercept Request**:
    - Use an intercepting tool (e.g., Burp Suite).
    - Capture the login request containing `email` and `password`.
        
        ![[/image 1 8.png|image 1 8.png]]
        
3. **Analyze Query**:
    - Example SQL query:
        
        ```SQL
        SELECT * FROM users WHERE email = 'test' AND password = 'hashed_password';
        ```
        
    - Inputs from the login fields are directly inserted into the query.
4. Send to repeater
    
    1. Right click inside the Request and select “Send to Repeater”
        
        ![[/image 2 8.png|image 2 8.png]]
        
    
    - Now navigate to the Repeater tab, it will be highlighted orange
        
        ![[/image 3 6.png|image 3 6.png]]
        
    - Click on the repeater tab to open it
        
        ![[/image 4 6.png|image 4 6.png]]
        
        - In the repeater, it is basically how it sounds, you can repeat requests, to see the output that the webserver provides
        - In this case we can test various email and password to see how the responses react
5. **Test Malicious Input**:
    
    - Inject a single quote (`'`) to test the SQL parser.
        
        ![[/image 5 6.png|image 5 6.png]]
        
    - Response: A `500 Internal Server Error` indicates a syntax issue, confirming injection vulnerability.
    - The response also provides use with the error message “SQLITE_ERROR” giving us the database name
    - if we get an error like that it means that we have some sort of injection capabilities
    
    ## Log into Admin Account (Juiceshop) Exploiting SQL Injection
    
    1. **Craft Malicious Payload**:
        
        ![[/image 6 6.png|image 6 6.png]]
        
        - Example payload:
            
            ```Plain
            test' OR 1=1; --
            ```
            
        - Breakdown:
            - Closes the initial query: `test'`.
            - Adds a condition: `OR 1=1` (always true).
            - Comments out the rest of the query: `-`.
    2. Test on the actual login page
        
        ![[/image 7 6.png|image 7 6.png]]
        
        ![[/image 8 6.png|image 8 6.png]]
        
        - Bypasses authentication and logs in as the first user (usually `admin`).
    
    ---
    
    ## Understanding Blind SQL Injection
    
    - Occurs when error messages are not displayed, making it harder to identify injection points.
    - Testing method:
        - Use **time-based commands** like `SLEEP`:
            
            ```SQL
            SELECT * FROM users WHERE email = 'test' AND SLEEP(5);
            ```
            
        - Observe if the server's response time matches the delay.
    
    ---
    
    ## Tools and Techniques
    
    - **Repeater** (in Burp Suite):
        - Useful for modifying and resending requests.
        - Displays detailed server responses.
    - **Active Scanning**:
        - Automatically injects payloads to detect vulnerabilities.
    
    ---
    
    ## Practice and Challenges
    
    1. **Juice Shop Challenges**:
        - Use practice platforms to explore SQL injection.
        - Work through challenges by difficulty levels (e.g., 2-star, 3-star).
    2. **Documentation**:
        - Study solutions to understand injection methods.
        - Take notes on how payloads manipulate queries.
    
    ---
    
    ## Key Takeaways
    
    - SQL injection works by modifying SQL queries to manipulate database behavior.
    - Errors like `500 Internal Server Error` reveal potential vulnerabilities.
    - Blind SQL injection requires advanced techniques, like time-based or boolean-based testing.
    - Learning to identify and exploit SQL injection builds a deeper understanding of secure coding practices.
    
    ---
    
    ## Next Steps
    
    - Focus on defense mechanisms against SQL injection.
    - Learn to secure input handling (e.g., parameterized queries, input validation).

---

## How to defend against SQL Injection

Here are the notes based on the provided transcript about SQL Injection defenses:

## Overview

- SQL Injection attacks are easy to prevent with proper coding practices.
- Two primary defenses:
    1. **Parameterized Queries (Prepared Statements)**
    2. **Input Sanitization**

---

## 1. Parameterized Queries

- **Definition**: Ensure inputs (parameters) are passed safely to SQL statements by separating the SQL logic from the user input.
- **Example of Parameterized Query**:
    
    ```SQL
    SELECT * FROM users WHERE email = ?;
    ```
    
- The `?` acts as a placeholder for the parameter (e.g., `email`).
- The SQL statement and the input are processed separately, preventing malicious input from altering the query structure.
- **Example of Non-Parameterized Query (Vulnerable)**:
    
    ```SQL
    SELECT * FROM users WHERE email = '" + email + "';
    ```
    
    - Combines SQL logic and input directly, leaving it open to injection attacks.
- **Why Parameterized Queries Work**:
    - Prevents malicious inputs (e.g., `' OR 1=1 --`) from altering the SQL statement.
    - Enforces a strict separation between the SQL logic and data input.

---

## 2. Input Sanitization

- **Definition**: Validate and clean user inputs to ensure they do not contain malicious content.
- **Examples of Malicious Inputs**:
    - Single quote (`'`).
    - Common attack patterns: `' OR 1=1 --`.
- **Approach**:
    - Reject unexpected characters (e.g., quotes, dashes).
    - Identify and block suspicious patterns or keywords.
    - Implement a whitelist approach for acceptable input formats.

---

## Key Points

- **Priority Defense**: Use parameterized queries as the primary defense against SQL Injection.
- **Additional Layer**: Input sanitization provides an extra layer of security.
- **Interview Tip**: When asked about SQL Injection defenses:
    1. Mention parameterized queries as the best practice.
    2. Discuss input sanitization as a complementary approach.

---

## Conclusion

- Secure coding practices can effectively prevent SQL Injection attacks.
- Responsible programming, like using parameterized queries, ensures safe handling of user inputs.

---

Would you like to save this as a file? Let me know!