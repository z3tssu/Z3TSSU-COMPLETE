---
title: 5.5 Dynamic Port Forwarding and SOCKS
updated: 2023-04-23T19:14:45.0000000+04:00
created: 2023-04-18T14:19:07.0000000+04:00
---

5.5 Dynamic Port Forwarding and SOCKS
Tuesday, April 18, 2023
2:19 PM
While single port forwarding works quite well for tasks that require access to specific sockets, there are times when we might need to run scans against many ports of a host, or even many ports across many machines, all through a pivot host. In those cases, dynamic port forwarding allows us to pivot through a host and establish several connections to any IP addresses/ports we want by using a SOCKS proxy.

-- Basically if we want to connect to multiple IP/Ports we use Dynamic Port Forwarding

## Step 1: Initiate a Dynamic SSH Connection

![image1](image1-114.png)

In this case, the SSH server will start a SOCKS proxy on port 9050, and forward any connection request through the SSH tunnel, where they are finally proxied by the SSH client.

The most interesting part is that we can easily use any of our tools through the SOCKS proxy by using proxychains.

## Step 2: Using Proxychains

To do so, we first need to make sure that proxychains is correctly configured to point any connection to the same port used by SSH for the SOCKS proxy server.

### The proxychains configuration file can be found at

\- /etc/proxychains.conf

If we scroll down to the end of the configuration file, we should see a line that indicates the port in use for socks proxying:

- \[ProxyList\]
- socks4 127.0.0.1 9050

The default port is 9050, but any port will work as long as it matches the one we used when establishing the SSH tunnel.

If we now want to execute any command through the proxy, we can use proxychains:

### Using Proxychains

- proxychains curl <http://pxeboot.za.tryhackme.com>

Note that some software like nmap might not work well with SOCKS in some circumstances, and might show altered results, so your mileage might vary.

