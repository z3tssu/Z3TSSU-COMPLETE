---
title: 5.4 Port Forwarding With Socat
updated: 2023-04-23T19:14:45.0000000+04:00
created: 2023-04-18T13:50:13.0000000+04:00
---

5.4 Port Forwarding With Socat
Tuesday, April 18, 2023
1:50 PM
In situations where SSH is not available, socat can be used to perform similar functionality. While not as flexible as SSH, socat allows you to forward ports in a much simpler way. One of the disadvantages of using socat is that we need to transfer it to the pivot host (PC-1 in our current example), making it more detectable than SSH, but it might be worth a try where no other option is available.

The basic syntax to perform port forwarding using socat is much simpler. If we wanted to open port 1234 on a host and forward any connection we receive there to port 4321 on host 1.1.1.1, you would have the following command:

| Command | socat TCP4-LISTEN:1234,fork TCP4:1.1.1.1:4321 |
|---------|-----------------------------------------------|

## Fork Option

The fork option allows socat to fork a new process for each connection received, making it possible to handle multiple connections without closing. If you don't include it, socat will close when the first connection made is finished.

Coming back to our example, if we wanted to access port 3389 on the server using PC-1 as a pivot as we did with SSH remote port forwarding, we could use the following command:

| Command | socat TCP4-LISTEN:3389,fork TCP4:3.3.3.3:3389 |
|---------|-----------------------------------------------|

![image1](image1-113.png)

- Socat will not forward the connection to the attacker PC, but however will open a port on the PC-1 machine that the attacker can connect to

![image2](image2-54.png)

## Adding a Firewall rule, in case a firewall is blocking it (need admin privilege)

| Command | netsh advfirewall firewall add rule name="Open Port 3389" dir=in action=allow protocol=TCP localport=3389 |
|---------|-----------------------------------------------------------------------------------------------------------|

## Example: Opening port 80 on the Client Machine, and forward connection to the attacker machine

| Command | C:\\\>socat TCP4-LISTEN:80,fork TCP4:1.1.1.1:80 |
|---------|-------------------------------------------------|

![image3](image3-38.png)

