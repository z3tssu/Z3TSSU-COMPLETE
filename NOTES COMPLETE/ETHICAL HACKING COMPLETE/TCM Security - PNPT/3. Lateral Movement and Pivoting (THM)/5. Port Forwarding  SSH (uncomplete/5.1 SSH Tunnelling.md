---
title: 5.1 SSH Tunnelling
updated: 2023-04-23T19:14:45.0000000+04:00
created: 2023-04-18T10:44:46.0000000+04:00
---

AM
The first protocol we'll be looking at is SSH, as it already has built-in functionality to do port forwarding through a feature called SSH Tunneling. While SSH used to be a protocol associated with Linux systems, Windows now ships with the OpenSSH client by default, so you can expect to find it in many systems nowadays, independent of their operating system.

SSH Tunnelling can be used in different ways to forward ports through an SSH connection, which we'll use depending on the situation.

### To explain each case, 

1.  let's assume a scenario where we've gained control over the PC-1 machine (it doesn't need to be administrator access)

2.  You would like to use it as a pivot to access a port on another machine to which we can't directly connect.
3.  We will start a tunnel from the PC-1 machine, acting as an SSH client, to the Attacker's PC, which will act as an SSH server.
4.  The reason to do so is that you'll often find an SSH client on Windows machines, but no SSH server will be available most of the time.

![image1](image1-110.png)

Since we'll be making a connection back to our attacker's machine, we'll want to create a user in it without access to any console for tunnelling and set a password to use for creating the tunnels:

## Creating a User with Non Access

| Command | useradd tunneluser -m -d /home/tunneluser -s /bin/true |
|---------|--------------------------------------------------------|
| Command | passwd tunneluser                                      |

Depending on your needs, the SSH tunnel can be used to do either local or remote port forwarding. Let's take a look at each case.

